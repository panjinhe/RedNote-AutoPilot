# 手机端专属上架方案（电脑操作）

## 先说结论（成本最小 + 稳定优先）

如果你确认**只能在手机 App 上架**，建议按下面优先级选择：

1. **首选：真机 Android + USB ADB + 桌面投屏控制（scrcpy）**
2. 次选：真机 Android + Wi-Fi ADB（仅在 USB 不方便时）
3. 备选：Android 模拟器（雷电/蓝叠/WSA）

> 实战中，真机链路通常比模拟器更稳定、风控风险更低、维护更简单。

---

## 为什么首选真机而不是模拟器

- **稳定性**：真机对图形渲染、输入事件、系统权限兼容更好。
- **可维护性**：系统升级和 App 升级后，真机问题通常更少。
- **风险控制**：很多平台会关注设备环境特征，真机通常更接近正常用户行为。
- **成本可控**：一台备用 Android 设备（可二手）+ 数据线即可。

---

## 低成本成熟架构（推荐落地）

```text
电脑（Windows/macOS/Linux）
  ├─ ADB（设备连接与指令）
  ├─ scrcpy（投屏+键鼠控制）
  ├─ 自动化执行层（uiautomator2 / Appium 二选一）
  └─ 任务编排层（你的现有上架任务队列）

Android 真机（专用上架机）
  ├─ 小红书商家 App（固定版本策略）
  ├─ 开发者选项 + USB 调试
  └─ 常亮/免休眠/免通知干扰设置
```

### 组件选择建议

- **投屏与人工兜底**：`scrcpy`（免费、成熟、低延迟）
- **自动化框架（优先级）**：
  1. `uiautomator2`（轻量、上手快，适合稳定流程）
  2. `Appium`（生态成熟，团队协作规范更完整）

如果你是单人或小团队，建议先上 `uiautomator2`，后续需要更强治理再迁移 Appium。

---

## 一次性搭建步骤（最小可用）

## 1) 准备设备

- 选一台 Android 9+ 备用机（建议 6GB+ 内存）。
- 专机专用：不装无关 App，不日常使用。
- 固定网络环境和充电，避免中途断连。

## 2) 电脑安装 ADB 与 scrcpy

```bash
# 检查 adb
adb version

# 检查设备
adb devices

# 启动投屏控制
scrcpy
```

## 3) 设备稳定性设置（关键）

- 开启开发者选项、USB 调试。
- 关闭自动系统更新、关闭应用自动更新。
- 关闭省电策略（对商家 App 与自动化框架放行）。
- 设置屏幕常亮（或充电时常亮）。
- 关闭通知弹窗、来电悬浮等干扰。

## 4) 自动化执行基线

- 不做“全自动一键发布”，采用**半自动 + 人工最终确认**。
- 自动化只做：打开页面、填标题/价格/SKU、上传素材、保存草稿。
- 最终发布由人工点击，降低误发与风控风险。

---

## 日常运行 SOP（稳定优先）

1. 启动设备并连接 USB。
2. `adb devices` 确认在线。
3. 启动 `scrcpy`，人工可实时观察。
4. 执行自动化任务（按队列逐条）。
5. 每条任务到“发布前”人工核对并点击发布。
6. 自动归档日志：任务号、时间、截图、失败原因。

---

## 故障处理与降级

### 常见故障

- **元素定位失效**（App UI 改版）
  - 处理：优先改 accessibility id / text 锚点，避免绝对坐标。
- **设备离线**
  - 处理：USB 重连、重启 adb server、重启手机。
- **弹窗干扰**
  - 处理：增加统一“弹窗清理器”步骤。

### 降级策略（必须有）

- 自动化失败 1 次：重试当前步骤。
- 连续失败 2 次：切换人工接管（scrcpy）。
- 连续失败 3 次：任务标记异常，进入人工池，暂停批量。

---

## 是否必须安装模拟器？

**不是必须。**

只有在以下情况才建议模拟器：
- 暂时没有可用 Android 真机；
- 你只做短期 PoC 验证；
- 对稳定性要求不高，能接受偶发兼容问题。

---

## 模拟器方案（仅备选）

### 方案一：LDPlayer（雷电模拟器）

**优点**：免费、资料多、可多开。

### 方案二：BlueStacks（蓝叠）

**优点**：生态成熟、兼容性相对好。

### 方案三：Windows Subsystem for Android (WSA)

**优点**：Windows 官方方案、系统集成度高。

---


## 需要 Root 或破解手机吗？

**不需要。** 本方案默认使用 Android 官方调试能力（开发者选项 + USB 调试 + ADB），配合 `scrcpy` 做投屏与键鼠控制即可。

- 不需要 Root。
- 不需要刷机或破解。
- 不建议改系统完整性状态（会增加稳定性与风控不确定性）。

## 我拿一台 OPPO 可以直接用吗？

**可以，绝大多数 OPPO 机型都能直接用。**

按下面清单操作：

1. 打开开发者选项（连续点击版本号开启）。
2. 打开「USB 调试」。
3. 用数据线连接电脑，手机上点击“允许 USB 调试（可勾选始终允许）”。
4. 电脑执行 `adb devices`，看到 `device` 状态即连接成功。
5. 执行 `scrcpy` 开始电脑端控制。

如果你在 OPPO 上遇到连接不稳定，优先排查：

- 数据线是否仅充电线（需可传输数据）。
- USB 模式是否为“文件传输”。
- 是否启用了系统省电/后台限制（建议对白名单放行）。

---

## 常用 ADB 命令（通用）

```bash
# 查看连接设备
adb devices

# 启动 App（示例）
adb shell am start -n com.xingin.xhs/com.xingin.xhs.index.v2.IndexActivityV2

# 截图并拉回本地
adb shell screencap -p /sdcard/screenshot.png
adb pull /sdcard/screenshot.png

# 点击/输入
adb shell input tap x y
adb shell input text "hello"

# 返回键
adb shell input keyevent 4
```

---

## 你可以直接照抄的最终建议

- **设备**：一台备用 Android 真机 + 数据线（不要先上模拟器）。
- **控制**：ADB + scrcpy。
- **自动化**：uiautomator2（后续可升级 Appium）。
- **策略**：自动填单 + 人工最终发布。
- **运维**：固定版本、固定网络、日志与截图留痕、失败自动降级人工。

这套方案总体投入低，且在“只能手机上架”的前提下，稳定性和可持续性最好。
